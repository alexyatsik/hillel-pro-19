"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}var DOMElement=function(){function o(t,e){_classCallCheck(this,o),this.element=document.createElement(t),e.appendChild(this.element)}return _createClass(o,[{key:"addClass",value:function(){var t;return(t=this.element.classList).add.apply(t,arguments),this.element}},{key:"removeClass",value:function(){var t;return(t=this.element.classList).remove.apply(t,arguments),this.element}},{key:"click",value:function(t){return this.element.addEventListener("click",t,event),this.element}},{key:"HTML",value:function(t){return this.element.innerHTML=t,this.element}},{key:"attr",value:function(t,e){return this.element.setAttribute(t,e),this.element}},{key:"get",value:function(){return this.element}}]),o}();function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _createSuper(n){return function(){var t,e=_getPrototypeOf(n);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Button=function(){_inherits(r,DOMElement);var n=_createSuper(r);function r(t,e){var o;return _classCallCheck(this,r),(o=n.call(this,"input",t)).value,o.element.setAttribute("type","button"),o.element.setAttribute("value",e),o.element.classList.add("input-button"),o}return r}();function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _createSuper(n){return function(){var t,e=_getPrototypeOf(n);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Input=function(){_inherits(s,DOMElement);var i=_createSuper(s);function s(t,e,o,n){var r;return _classCallCheck(this,s),(r=i.call(this,"input",t)).element.setAttribute("type","text"),r.element.setAttribute("name",e),r.element.setAttribute("placeholder",o),n&&r.element.setAttribute("value",n),r.element.classList.add("input-text"),r}return s}();function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _createSuper(n){return function(){var t,e=_getPrototypeOf(n);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Form=function(){_inherits(n,DOMElement);var o=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=o.call(this,"form",t)).attr("id","crudForm"),e.table=new DOMElement("table",e.element).get(),e}return n}();function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _createSuper(n){return function(){var t,e=_getPrototypeOf(n);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ActionBar=function(){_inherits(s,DOMElement);var i=_createSuper(s);function s(t,e,o){var n;_classCallCheck(this,s),(n=i.call(this,"div",t)).itemId=e,n.addClass("action-bar");for(var r=0;r<o.length;r++)n.createButton(o[r]);return n}return _createClass(s,[{key:"createButton",value:function(t){var e=new Button(this.element,t).get();e.dataset.action=t.toLowerCase(),e.dataset.id=this.itemId}}]),s}();function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _createSuper(n){return function(){var t,e=_getPrototypeOf(n);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var AddForm=function(){_inherits(r,Form);var n=_createSuper(r);function r(t){var e;_classCallCheck(this,r),(e=n.call(this,t)).idRow=new DOMElement("tr",e.table).get(),new DOMElement("th",e.idRow).HTML("ID");var o=new DOMElement("td",e.idRow).get();return new Input(o,"id","",getUniqueId()).get().disabled=!0,e.taskRow=new DOMElement("tr",e.table).get(),new DOMElement("th",e.taskRow).HTML("Task"),e.taskNest=new DOMElement("td",e.taskRow).get(),new Select(e.taskNest,"task",apis.tasks).attr("id","select-task"),e.taskRow=new DOMElement("tr",e.table).get(),new DOMElement("th",e.taskRow).HTML("Priority"),e.taskNest=new DOMElement("td",e.taskRow).get(),new Select(e.taskNest,"priority",apis.priorities).attr("id","select-priorities"),e.taskRow=new DOMElement("tr",e.table).get(),new DOMElement("th",e.taskRow).HTML("Status"),e.taskNest=new DOMElement("td",e.taskRow).get(),new Select(e.taskNest,"status",apis.statuses).attr("id","select-statuses"),e.taskRow=new DOMElement("tr",e.table).get(),new DOMElement("th",e.taskRow).HTML("Description"),e.taskNest=new DOMElement("td",e.taskRow).get(),new Input(e.taskNest,"description","Task description"),e.timestampRow=new DOMElement("tr",e.table).get(),new DOMElement("th",e.timestampRow).HTML("Added"),e.timestampRow=new DOMElement("td",e.timestampRow).get(),new Input(e.timestampRow,"timestamp","",moment().format("Do MMM, h:mm a")).get().disabled=!0,e}return r}();function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _createSuper(n){return function(){var t,e=_getPrototypeOf(n);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var EditForm=function(){_inherits(i,Form);var r=_createSuper(i);function i(t,e){var o;_classCallCheck(this,i),(o=r.call(this,t)).todo=getItemFromLocalStorage("todos",e),o.idRow=new DOMElement("tr",o.table).get(),new DOMElement("th",o.idRow).HTML("ID");var n=new DOMElement("td",o.idRow).get();return new Input(n,"id","",o.todo.id).get().disabled=!0,o.taskRow=new DOMElement("tr",o.table).get(),new DOMElement("th",o.taskRow).HTML("Task"),o.taskNest=new DOMElement("td",o.taskRow).get(),new Select(o.taskNest,"task",apis.tasks,o.todo.task).attr("id","select-task"),o.taskRow=new DOMElement("tr",o.table).get(),new DOMElement("th",o.taskRow).HTML("Priority"),o.taskNest=new DOMElement("td",o.taskRow).get(),new Select(o.taskNest,"priority",apis.priorities,o.todo.priority).attr("id","select-priorities"),o.taskRow=new DOMElement("tr",o.table).get(),new DOMElement("th",o.taskRow).HTML("Status"),o.taskNest=new DOMElement("td",o.taskRow).get(),new Select(o.taskNest,"status",apis.statuses,o.todo.status).attr("id","select-statuses"),o.taskRow=new DOMElement("tr",o.table).get(),new DOMElement("th",o.taskRow).HTML("Description"),o.taskNest=new DOMElement("td",o.taskRow).get(),"No description"===o.todo.description?new Input(o.taskNest,"description",o.todo.description):new Input(o.taskNest,"description","Task description",o.todo.description),o.timestampRow=new DOMElement("tr",o.table).get(),new DOMElement("th",o.timestampRow).HTML("Added"),o.timestampRow=new DOMElement("td",o.timestampRow).get(),new Input(o.timestampRow,"timestamp","",o.todo.timestamp).get().disabled=!0,o}return i}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}var Modal=function(){function p(t,e,o){_classCallCheck(this,p),this.modal=document.createElement("div"),this.modal.classList.add("modal","fade"),this.modal.setAttribute("id",t),this.modal.setAttribute("tabindex","-1"),this.modal.setAttribute("role","dialog"),this.modal.setAttribute("aria-labelledby","".concat(t,"Label")),this.modal.setAttribute("aria-hidden",!0),this.modal.dataset.backdrop="static";var n=new DOMElement("div",this.modal);n.addClass("modal-dialog"),n.attr("role","document");var r=new DOMElement("div",n.get());r.addClass("modal-content");var i=new DOMElement("div",r.get());i.addClass("modal-header");var s=new DOMElement("h5",i.get());s.addClass("modal-title"),s.attr("id","".concat(t,"Label"));var a=new DOMElement("button",i.get());a.addClass("close"),a.attr("type","button"),a.attr("aria-label","Close"),a.attr("data-dismiss","modal"),a.HTML('<span aria-hidden="true">&times;</span>'),a.click(o[0]);var c=new DOMElement("div",r.get());c.addClass("modal-body"),c.attr("id","".concat(t,"Content"));var l=new DOMElement("div",r.get());l.addClass("modal-footer");var u=new DOMElement("button",l.get());u.addClass("btn","btn-secondary"),u.attr("type","button"),u.attr("data-dismiss","modal"),u.click(o[0]);var f=new DOMElement("button",l.get());f.addClass("btn","btn-primary"),f.attr("type","button"),f.click(o[1]),s.HTML(e),u.HTML("Close"),f.HTML("Apply")}return _createClass(p,[{key:"get",value:function(){return this.modal}}]),p}();function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _createSuper(n){return function(){var t,e=_getPrototypeOf(n);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Select=function(){_inherits(c,DOMElement);var a=_createSuper(c);function c(t,e,o,n){var r;_classCallCheck(this,c),(r=a.call(this,"select",t)).attr("name",e),r.coverOption=new DOMElement("option",r.element),n&&"Not defined"!==n?(r.coverOption.attr("value",n),r.coverOption.HTML(n)):(r.coverOption.attr("value","0"),r.coverOption.HTML("Not defined"));for(var i=0;i<o.length;i++)if(n!==o[i].value){var s=new DOMElement("option",r.element);s.HTML(o[i].value),s.attr("value",o[i].value)}return r}return c}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}var Todo=function(){function s(t,e,o,n,r,i){_classCallCheck(this,s),this.id=t,this.status=n,this.priority=o,this.task=e,this.description=r||"No description",this.timestamp=i,this.root}return _createClass(s,[{key:"get",value:function(){this.root=document.createElement("tr"),this.root.dataset.id=this.id,new DOMElement("td",this.root).HTML(this.task),new DOMElement("td",this.root).HTML(this.priority),new DOMElement("td",this.root).HTML(this.status),new DOMElement("td",this.root).HTML(this.description),new DOMElement("td",this.root).HTML(this.timestamp);var t=new DOMElement("td",this.root);return new ActionBar(t.get(),this.id,["Edit","Delete"]),this.root}}]),s}();function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _createSuper(n){return function(){var t,e=_getPrototypeOf(n);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var apis,TodoList=function(){_inherits(n,DOMElement);var o=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=o.call(this,"table",t)).todos=[],e.attr("id","todosList"),e.header(),e.click(actionsHandler),e}return _createClass(n,[{key:"addTodo",value:function(){for(var t=0;t<arguments.length;t++)this.todos.push(arguments[t])}},{key:"getTodosList",value:function(){return this.todos.slice()}},{key:"header",value:function(){var t=new DOMElement("tr",this.element);new DOMElement("th",t.get()).HTML("Task"),new DOMElement("th",t.get()).HTML("Priority"),new DOMElement("th",t.get()).HTML("Status"),new DOMElement("th",t.get()).HTML("Description"),new DOMElement("th",t.get()).HTML("Added"),new DOMElement("th",t.get()).HTML("Actions")}},{key:"fillList",value:function(){this.HTML(""),this.header();for(var t=0;t<this.todos.length;t++)this.element.appendChild(this.todos[t].get())}},{key:"sort",value:function(){}}]),n}();function loadTodoList(){destroy("#todosList");var t=new TodoList(seek("#app")),e=getLocalStorage("todos");if(e){for(var o=0;o<e.length;o++)Object.setPrototypeOf(e[o],new Todo),t.addTodo(e[o]);t.fillList()}}function isInputCorrect(t){var e=!0,o=seek("#select-task"),n=seek("#select-priorities"),r=seek("#select-statuses"),i=document.getElementsByClassName("error-message");o.classList.remove("error-block"),n.classList.remove("error-block"),r.classList.remove("error-block");for(var s=0;s<i.length;s++)i[s].remove();"0"===t.task.value&&(o.classList.add("error-block"),e=!1),"0"===t.priority.value&&(n.classList.add("error-block"),e=!1),"0"===t.status.value&&(r.classList.add("error-block"),e=!1),i=document.getElementsByClassName("error-block");for(var a=0;a<i.length;a++){var c=new DOMElement("span",i[a]);c.addClass("error-message"),c.HTML("Incorrect input")}return e}function getApis(){fetch("data.json").then(function(t){return t.json()}).then(function(t){apis=t}).then(function(){checkApis()}).then(function(){loadTodoList()}).catch(function(t){console.log("rejected",t)})}function checkApis(){for(var t=getLocalStorage("todos"),e=0;e<t.length;e++){for(var o=t[e],n=!1,r=0;r<apis.statuses.length;r++)if(o.status===apis.statuses[r].value){n=!0;break}n||(t[e].status="Not defined"),n=!1;for(var i=0;i<apis.priorities.length;i++)if(o.priority===apis.priorities[i].value){n=!0;break}n||(t[e].priority="Not defined"),n=!1;for(var s=0;s<apis.tasks.length;s++)if(o.task===apis.tasks[s].value){n=!0;break}n||(t[e].task="Not defined")}localStorage.setItem("todos",JSON.stringify(t))}function addItemToPageContent(t){seek("#todosList").appendChild(t.get())}function updateItemInPageContent(t){var e=document.querySelector('#todosList > [data-id="'.concat(t.id,'"]'));seek("#todosList").replaceChild(t.get(),e)}function deleteItemFromPage(t){document.querySelector('tr[data-id="'.concat(t,'"]')).remove()}function deleteConfirmationCheck(t){t.hidden=!0,new ActionBar(t.parentElement,t.dataset.id,["Confirm","Cancel"])}function windowHandler(){getApis(),new Button(seek("#app"),"Add TODO").click(addTodoHandler),loadTodoList()}function addTodoHandler(){seek("#app").appendChild(new Modal("modalWindowAdd","Add new item",[closeButtonHandler,addConfirmedHandler]).get()),new AddForm(seek("#modalWindowAddContent")),$("#modalWindowAdd").modal("show")}function addConfirmedHandler(){var t=document.forms.crudForm,e=new Todo(t.id.value,t.task.value,t.priority.value,t.status.value,t.description.value,t.timestamp.value);isInputCorrect(t)&&(addItemToLocalStorage("todos",e),addItemToPageContent(e),$("#modalWindowAdd").modal("hide"),destroy("#modalWindowAdd"))}function closeButtonHandler(){destroy("#modalWindowEdit"),destroy("#modalWindowAdd")}function actionsHandler(t){var e=t.target.dataset.action,o=t.target.dataset.id;switch(e){case"edit":seek("#app").appendChild(new Modal("modalWindowEdit","Edit item",[closeButtonHandler,EditConfirmedHandler]).get()),new EditForm(seek("#modalWindowEditContent"),o),$("#modalWindowEdit").modal("show");break;case"delete":deleteConfirmationCheck(t.target);break;case"cancel":t.target.parentElement.remove(),seek('input[data-action="delete"][data-id="'.concat(o,'"]')).hidden=!1;break;case"confirm":deleteItemFromLocalStorage("todos",o),deleteItemFromPage(o)}}function EditConfirmedHandler(){var t=document.forms.crudForm,e=new Todo(t.id.value,t.task.value,t.priority.value,t.status.value,t.description.value,t.timestamp.value);isInputCorrect(t)&&(updateItemInLocalStorage("todos",e),updateItemInPageContent(e),$("#modalWindowEdit").modal("hide"),destroy("#modalWindowEdit"))}function seek(t){return document.querySelector(t)||!1}function destroy(t){var e=seek(t);e&&e.remove()}function getUniqueId(){return Math.floor(Date.now()*Math.random()%1e5).toString()}function addItemToLocalStorage(t,e){var o=getLocalStorage(t);(o=o||[]).push(e),localStorage.setItem(t,JSON.stringify(o))}function updateItemInLocalStorage(t,e){for(var o=getLocalStorage(t),n=0;n<o.length;n++)if(o[n].id===e.id){o[n]=e;break}localStorage.setItem(t,JSON.stringify(o))}function getLocalStorage(t){return JSON.parse(localStorage.getItem(t))}function getItemFromLocalStorage(t,e){var o=getLocalStorage(t);if(o)for(var n=0;n<o.length;n++)if(o[n].id===e)return o[n];return!1}function deleteItemFromLocalStorage(t,e){for(var o=getLocalStorage(t),n=0;n<o.length;n++)if(o[n].id===e){o.splice(n,1);break}localStorage.setItem(t,JSON.stringify(o))}window.addEventListener("DOMContentLoaded",windowHandler);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRPTUVsZW1lbnQuanMiLCJCdXR0b24uanMiLCJJbnB1dC5qcyIsIkZvcm0uanMiLCJBY3Rpb25CYXIuanMiLCJBZGRGb3JtLmpzIiwiRWRpdEZvcm0uanMiLCJNb2RhbC5qcyIsIlNlbGVjdC5qcyIsIlRvZG8uanMiLCJ1dGlscy5qcyIsIlRvZG9MaXN0LmpzIiwiYXBwLmNvcmUuanMiLCJsaXN0ZW5lcnMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiRE9NRWxlbWVudCIsInRhZyIsInBhcmVudCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJfdGhpcyRlbGVtZW50JGNsYXNzTGkiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBseSIsImFyZ3VtZW50cyIsIl90aGlzJGVsZW1lbnQkY2xhc3NMaTIiLCJyZW1vdmUiLCJoYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidmFsdWUiLCJpbm5lckhUTUwiLCJuYW1lIiwic2V0QXR0cmlidXRlIiwiQnV0dG9uIiwiX3RoaXMiLCJfc3VwZXIiLCJjYWxsIiwiSW5wdXQiLCJwbGFjZWhvbGRlciIsIkZvcm0iLCJhdHRyIiwidGFibGUiLCJnZXQiLCJBY3Rpb25CYXIiLCJpdGVtSWQiLCJidXR0b25zVmFsdWVzIiwiYWRkQ2xhc3MiLCJpIiwibGVuZ3RoIiwiY3JlYXRlQnV0dG9uIiwiYnV0dG9uIiwiZGF0YXNldCIsImFjdGlvbiIsInRvTG93ZXJDYXNlIiwiaWQiLCJBZGRGb3JtIiwiaWRSb3ciLCJIVE1MIiwiaWRWYWx1ZU5lc3QiLCJnZXRVbmlxdWVJZCIsImRpc2FibGVkIiwidGFza1JvdyIsInRhc2tOZXN0IiwiU2VsZWN0IiwiYXBpcyIsInRhc2tzIiwicHJpb3JpdGllcyIsInN0YXR1c2VzIiwidGltZXN0YW1wUm93IiwibW9tZW50IiwiZm9ybWF0IiwiRWRpdEZvcm0iLCJ0b2RvIiwiZ2V0SXRlbUZyb21Mb2NhbFN0b3JhZ2UiLCJ0YXNrIiwicHJpb3JpdHkiLCJzdGF0dXMiLCJkZXNjcmlwdGlvbiIsInRpbWVzdGFtcCIsIk1vZGFsIiwibW9kYWxJZCIsInRpdGxlIiwiaGFuZGxlcnMiLCJtb2RhbCIsImNvbmNhdCIsImJhY2tkcm9wIiwibW9kYWxEaWFsb2ciLCJtb2RhbENvbnRlbnQiLCJtb2RhbEhlYWRlciIsImg1IiwiaGVhZGVyQ2xvc2VCdXR0b24iLCJjbGljayIsIm1vZGFsQm9keSIsIm1vZGFsRm9vdGVyIiwiY2xvc2UiLCJjb2xsZWN0aW9uIiwiY292ZXJPcHRpb24iLCJvcHRpb24iLCJUb2RvIiwicm9vdCIsImFjdGlvbnNOZXN0IiwiVG9kb0xpc3QiLCJ0b2RvcyIsImhlYWRlciIsImFjdGlvbnNIYW5kbGVyIiwicHVzaCIsInNsaWNlIiwidHIiLCJsb2FkVG9kb0xpc3QiLCJkZXN0cm95IiwibGlzdCIsInNlZWsiLCJ0b2Rvc0xpc3QiLCJnZXRMb2NhbFN0b3JhZ2UiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsImFkZFRvZG8iLCJmaWxsTGlzdCIsImlzSW5wdXRDb3JyZWN0IiwiZm9ybSIsImZsYWciLCJlcnJvclNlbGVjdHMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibWVzc2FnZSIsImdldEFwaXMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJqc29uIiwiY2hlY2tBcGlzIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImRiIiwiY3VycmVudCIsImlzQ3VycmVudEFwaUV4aXN0cyIsImsiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZEl0ZW1Ub1BhZ2VDb250ZW50IiwidG9kb09iaiIsInVwZGF0ZUl0ZW1JblBhZ2VDb250ZW50IiwidGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsInJlcGxhY2VDaGlsZCIsImRlbGV0ZUl0ZW1Gcm9tUGFnZSIsImRlbGV0ZUNvbmZpcm1hdGlvbkNoZWNrIiwiZGVsZXRlQnV0dG9uIiwiaGlkZGVuIiwicGFyZW50RWxlbWVudCIsIndpbmRvd0hhbmRsZXIiLCJhZGRUb2RvSGFuZGxlciIsImNsb3NlQnV0dG9uSGFuZGxlciIsImFkZENvbmZpcm1lZEhhbmRsZXIiLCIkIiwiZm9ybXMiLCJjcnVkRm9ybSIsImFkZEl0ZW1Ub0xvY2FsU3RvcmFnZSIsIkVkaXRDb25maXJtZWRIYW5kbGVyIiwiZGVsZXRlSXRlbUZyb21Mb2NhbFN0b3JhZ2UiLCJ1cGRhdGVJdGVtSW5Mb2NhbFN0b3JhZ2UiLCJzZWxlY3RvciIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJyYW5kb20iLCJ0b1N0cmluZyIsImxzTmFtZSIsIml0ZW0iLCJwYXJzZSIsImdldEl0ZW0iLCJscyIsInNwbGljZSIsIndpbmRvdyJdLCJtYXBwaW5ncyI6IkFBQUEsdVpBRU1BLHNCQUNGLFNBQUFBLEVBQVlDLEVBQUtDLEdBQVFDLGdCQUFBQyxLQUFBSixHQUNyQkksS0FBS0MsUUFBVUMsU0FBU0MsY0FBY04sR0FDdENDLEVBQU9NLFlBQVlKLEtBQUtDLGlFQUdqQixJQUFBSSxFQUdQLE9BRkFBLEVBQUFMLEtBQUtDLFFBQVFLLFdBQVVDLElBQXZCQyxNQUFBSCxFQUE4QkksV0FFdkJULEtBQUtDLDhDQUdGLElBQUFTLEVBR1YsT0FGQUEsRUFBQVYsS0FBS0MsUUFBUUssV0FBVUssT0FBdkJILE1BQUFFLEVBQWlDRCxXQUUxQlQsS0FBS0Msc0NBR1ZXLEdBR0YsT0FGQVosS0FBS0MsUUFBUVksaUJBQWlCLFFBQVNELEVBQVNFLE9BRXpDZCxLQUFLQyxxQ0FHWGMsR0FHRCxPQUZBZixLQUFLQyxRQUFRZSxVQUFZRCxFQUVsQmYsS0FBS0MscUNBR1hnQixFQUFNRixHQUdQLE9BRkFmLEtBQUtDLFFBQVFpQixhQUFhRCxFQUFNRixHQUV6QmYsS0FBS0Msc0NBSVosT0FBT0QsS0FBS0MsdXBEQ3JDZGtCLDhCQUFldkIsa0NBQ2pCLFNBQUF1QixFQUFZckIsRUFBUWlCLEdBQU8sSUFBQUssRUFBQSxPQUFBckIsZ0JBQUFDLEtBQUFtQixJQUN2QkMsRUFB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RCxTQUFTNkIseUJBQXlCUSxFQUFRQyxHQUV0QyxJQURBLElBQU10QyxFQUFLcEIsZ0JBQWdCeUQsR0FDbEIzSCxFQUFJLEVBQUdBLEVBQUlzRixFQUFHckYsT0FBUUQsSUFDM0IsR0FBSXNGLEVBQUd0RixHQUFHTyxLQUFPcUgsRUFBS3JILEdBQUksQ0FDdEIrRSxFQUFHdEYsR0FBSzRILEVBQ1IsTUFHUmxDLGFBQWFDLFFBQVFnQyxFQUFRL0IsS0FBS0MsVUFBVVAsSUFHaEQsU0FBU3BCLGdCQUFnQnlELEdBQ3JCLE9BQU8vQixLQUFLaUMsTUFBTW5DLGFBQWFvQyxRQUFRSCxJQUczQyxTQUFTakcsd0JBQXdCaUcsRUFBUTlILEdBQ3JDLElBQU1rSSxFQUFLN0QsZ0JBQWdCeUQsR0FDM0IsR0FBSUksRUFDQSxJQUFLLElBQUkvSCxFQUFJLEVBQUdBLEVBQUkrSCxFQUFHOUgsT0FBUUQsSUFDM0IsR0FBSStILEVBQUcvSCxHQUFHTyxLQUFPVixFQUNiLE9BQU9rSSxFQUFHL0gsR0FLdEIsT0FBTyxFQUdYLFNBQVNrSCwyQkFBMkJTLEVBQVE5SCxHQUV4QyxJQURBLElBQU15RixFQUFLcEIsZ0JBQWdCeUQsR0FDbEIzSCxFQUFJLEVBQUdBLEVBQUlzRixFQUFHckYsT0FBUUQsSUFDM0IsR0FBSXNGLEVBQUd0RixHQUFHTyxLQUFPVixFQUFRLENBQ3JCeUYsRUFBRzBDLE9BQU9oSSxFQUFHLEdBQ2IsTUFHUjBGLGFBQWFDLFFBQVFnQyxFQUFRL0IsS0FBS0MsVUFBVVAsSUkvRGhEMkMsT0FBT3JKLGlCQUFpQixtQkFBb0I2SCIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5jbGFzcyBET01FbGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHRhZywgcGFyZW50KSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xyXG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENsYXNzKCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLmFyZ3VtZW50cyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ2xhc3MoKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoLi4uYXJndW1lbnRzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBjbGljayhoYW5kbGVyKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlciwgZXZlbnQpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIEhUTUwodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdmFsdWU7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXR0cihuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xyXG4gICAgfVxyXG59IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY2xhc3MgQnV0dG9uIGV4dGVuZHMgRE9NRWxlbWVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIHZhbHVlKSB7XHJcbiAgICAgICAgc3VwZXIoJ2lucHV0JywgcGFyZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy52YWx1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHZhbHVlKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaW5wdXQtYnV0dG9uJyk7XHJcbiAgICB9XHJcbn0iLCIndXNlIHN0cmljdCc7XHJcblxyXG5jbGFzcyBJbnB1dCBleHRlbmRzIERPTUVsZW1lbnQge1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50LCBuYW1lLCBwbGFjZWhvbGRlciwgdmFsdWUpIHtcclxuICAgICAgICBzdXBlcignaW5wdXQnLCBwYXJlbnQpO1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCduYW1lJywgbmFtZSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCBwbGFjZWhvbGRlcik7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaW5wdXQtdGV4dCcpO1xyXG4gICAgfVxyXG59XHJcblxyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5jbGFzcyBGb3JtIGV4dGVuZHMgRE9NRWxlbWVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQpIHtcclxuICAgICAgICBzdXBlcignZm9ybScsIHBhcmVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuYXR0cignaWQnLCAnY3J1ZEZvcm0nKTtcclxuXHJcbiAgICAgICAgdGhpcy50YWJsZSA9IG5ldyBET01FbGVtZW50KCd0YWJsZScsIHRoaXMuZWxlbWVudCkuZ2V0KCk7XHJcbiAgICB9XHJcbn0iLCIndXNlIHN0cmljdCc7XHJcblxyXG5jbGFzcyBBY3Rpb25CYXIgZXh0ZW5kcyBET01FbGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgaXRlbUlkLCBidXR0b25zVmFsdWVzKSB7XHJcbiAgICAgICAgc3VwZXIoJ2RpdicsIHBhcmVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkO1xyXG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ2FjdGlvbi1iYXInKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidXR0b25zVmFsdWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uKGJ1dHRvbnNWYWx1ZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCdXR0b24odmFsdWUpIHtcclxuICAgICAgICBjb25zdCBidXR0b24gPSBuZXcgQnV0dG9uKHRoaXMuZWxlbWVudCwgdmFsdWUpLmdldCgpO1xyXG4gICAgICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvbiA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgYnV0dG9uLmRhdGFzZXQuaWQgPSB0aGlzLml0ZW1JZDtcclxuICAgIH1cclxufSIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmNsYXNzIEFkZEZvcm0gZXh0ZW5kcyBGb3JtIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudCkge1xyXG4gICAgICAgIHN1cGVyKHBhcmVudCk7XHJcblxyXG4gICAgICAgIC8vIElEIHJvd1xyXG4gICAgICAgIHRoaXMuaWRSb3cgPSBuZXcgRE9NRWxlbWVudCgndHInLCB0aGlzLnRhYmxlKS5nZXQoKTtcclxuICAgICAgICBuZXcgRE9NRWxlbWVudCgndGgnLCB0aGlzLmlkUm93KS5IVE1MKCdJRCcpO1xyXG4gICAgICAgIGNvbnN0IGlkVmFsdWVOZXN0ID0gbmV3IERPTUVsZW1lbnQoJ3RkJywgdGhpcy5pZFJvdykuZ2V0KCk7XHJcbiAgICAgICAgbmV3IElucHV0KGlkVmFsdWVOZXN0LCAnaWQnLCAnJywgZ2V0VW5pcXVlSWQoKSkuZ2V0KCkuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBUYXNrIHJvd1xyXG4gICAgICAgIHRoaXMudGFza1JvdyA9IG5ldyBET01FbGVtZW50KCd0cicsIHRoaXMudGFibGUpLmdldCgpO1xyXG4gICAgICAgIG5ldyBET01FbGVtZW50KCd0aCcsIHRoaXMudGFza1JvdykuSFRNTCgnVGFzaycpO1xyXG4gICAgICAgIHRoaXMudGFza05lc3QgPSBuZXcgRE9NRWxlbWVudCgndGQnLCB0aGlzLnRhc2tSb3cpLmdldCgpO1xyXG4gICAgICAgIG5ldyBTZWxlY3QodGhpcy50YXNrTmVzdCwgJ3Rhc2snLCBhcGlzLnRhc2tzKS5hdHRyKCdpZCcsICdzZWxlY3QtdGFzaycpO1xyXG5cclxuICAgICAgICAvLyBQcmlvcml0eSByb3dcclxuICAgICAgICB0aGlzLnRhc2tSb3cgPSBuZXcgRE9NRWxlbWVudCgndHInLCB0aGlzLnRhYmxlKS5nZXQoKTtcclxuICAgICAgICBuZXcgRE9NRWxlbWVudCgndGgnLCB0aGlzLnRhc2tSb3cpLkhUTUwoJ1ByaW9yaXR5Jyk7XHJcbiAgICAgICAgdGhpcy50YXNrTmVzdCA9IG5ldyBET01FbGVtZW50KCd0ZCcsIHRoaXMudGFza1JvdykuZ2V0KCk7XHJcbiAgICAgICAgbmV3IFNlbGVjdCh0aGlzLnRhc2tOZXN0LCAncHJpb3JpdHknLCBhcGlzLnByaW9yaXRpZXMpLmF0dHIoJ2lkJywgJ3NlbGVjdC1wcmlvcml0aWVzJyk7XHJcblxyXG4gICAgICAgIC8vIFN0YXR1cyByb3dcclxuICAgICAgICB0aGlzLnRhc2tSb3cgPSBuZXcgRE9NRWxlbWVudCgndHInLCB0aGlzLnRhYmxlKS5nZXQoKTtcclxuICAgICAgICBuZXcgRE9NRWxlbWVudCgndGgnLCB0aGlzLnRhc2tSb3cpLkhUTUwoJ1N0YXR1cycpO1xyXG4gICAgICAgIHRoaXMudGFza05lc3QgPSBuZXcgRE9NRWxlbWVudCgndGQnLCB0aGlzLnRhc2tSb3cpLmdldCgpO1xyXG4gICAgICAgIG5ldyBTZWxlY3QodGhpcy50YXNrTmVzdCwgJ3N0YXR1cycsIGFwaXMuc3RhdHVzZXMpLmF0dHIoJ2lkJywgJ3NlbGVjdC1zdGF0dXNlcycpO1xyXG5cclxuICAgICAgICAvL0Rlc2NyaXB0aW9uIHJvd1xyXG4gICAgICAgIHRoaXMudGFza1JvdyA9IG5ldyBET01FbGVtZW50KCd0cicsIHRoaXMudGFibGUpLmdldCgpO1xyXG4gICAgICAgIG5ldyBET01FbGVtZW50KCd0aCcsIHRoaXMudGFza1JvdykuSFRNTCgnRGVzY3JpcHRpb24nKTtcclxuICAgICAgICB0aGlzLnRhc2tOZXN0ID0gbmV3IERPTUVsZW1lbnQoJ3RkJywgdGhpcy50YXNrUm93KS5nZXQoKTtcclxuICAgICAgICBuZXcgSW5wdXQodGhpcy50YXNrTmVzdCwgJ2Rlc2NyaXB0aW9uJywgJ1Rhc2sgZGVzY3JpcHRpb24nKTtcclxuXHJcbiAgICAgICAgLy9UaW1lc3RhbXAgcm93XHJcbiAgICAgICAgdGhpcy50aW1lc3RhbXBSb3cgPSBuZXcgRE9NRWxlbWVudCgndHInLCB0aGlzLnRhYmxlKS5nZXQoKTtcclxuICAgICAgICBuZXcgRE9NRWxlbWVudCgndGgnLCB0aGlzLnRpbWVzdGFtcFJvdykuSFRNTCgnQWRkZWQnKTtcclxuICAgICAgICB0aGlzLnRpbWVzdGFtcFJvdyA9IG5ldyBET01FbGVtZW50KCd0ZCcsIHRoaXMudGltZXN0YW1wUm93KS5nZXQoKTtcclxuICAgICAgICBuZXcgSW5wdXQodGhpcy50aW1lc3RhbXBSb3csICd0aW1lc3RhbXAnLCAnJywgbW9tZW50KCkuZm9ybWF0KCdEbyBNTU0sIGg6bW0gYScpKS5nZXQoKS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbn0iLCIndXNlIHN0cmljdCc7XHJcblxyXG5jbGFzcyBFZGl0Rm9ybSBleHRlbmRzIEZvcm0ge1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50LCBpdGVtSWQpIHtcclxuICAgICAgICBzdXBlcihwYXJlbnQpO1xyXG5cclxuICAgICAgICB0aGlzLnRvZG8gPSBnZXRJdGVtRnJvbUxvY2FsU3RvcmFnZSgndG9kb3MnLCBpdGVtSWQpO1xyXG5cclxuICAgICAgICAvLyBJRCByb3dcclxuICAgICAgICB0aGlzLmlkUm93ID0gbmV3IERPTUVsZW1lbnQoJ3RyJywgdGhpcy50YWJsZSkuZ2V0KCk7XHJcbiAgICAgICAgbmV3IERPTUVsZW1lbnQoJ3RoJywgdGhpcy5pZFJvdykuSFRNTCgnSUQnKTtcclxuICAgICAgICBjb25zdCBpZFZhbHVlTmVzdCA9IG5ldyBET01FbGVtZW50KCd0ZCcsIHRoaXMuaWRSb3cpLmdldCgpO1xyXG4gICAgICAgIG5ldyBJbnB1dChpZFZhbHVlTmVzdCwgJ2lkJywgJycsIHRoaXMudG9kby5pZCkuZ2V0KCkuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBUYXNrIHJvd1xyXG4gICAgICAgIHRoaXMudGFza1JvdyA9IG5ldyBET01FbGVtZW50KCd0cicsIHRoaXMudGFibGUpLmdldCgpO1xyXG4gICAgICAgIG5ldyBET01FbGVtZW50KCd0aCcsIHRoaXMudGFza1JvdykuSFRNTCgnVGFzaycpO1xyXG4gICAgICAgIHRoaXMudGFza05lc3QgPSBuZXcgRE9NRWxlbWVudCgndGQnLCB0aGlzLnRhc2tSb3cpLmdldCgpO1xyXG4gICAgICAgIG5ldyBTZWxlY3QodGhpcy50YXNrTmVzdCwgJ3Rhc2snLCBhcGlzLnRhc2tzLCB0aGlzLnRvZG8udGFzaykuYXR0cignaWQnLCAnc2VsZWN0LXRhc2snKTtcclxuXHJcbiAgICAgICAgLy8gUHJpb3JpdHkgcm93XHJcbiAgICAgICAgdGhpcy50YXNrUm93ID0gbmV3IERPTUVsZW1lbnQoJ3RyJywgdGhpcy50YWJsZSkuZ2V0KCk7XHJcbiAgICAgICAgbmV3IERPTUVsZW1lbnQoJ3RoJywgdGhpcy50YXNrUm93KS5IVE1MKCdQcmlvcml0eScpO1xyXG4gICAgICAgIHRoaXMudGFza05lc3QgPSBuZXcgRE9NRWxlbWVudCgndGQnLCB0aGlzLnRhc2tSb3cpLmdldCgpO1xyXG4gICAgICAgIG5ldyBTZWxlY3QodGhpcy50YXNrTmVzdCwgJ3ByaW9yaXR5JywgYXBpcy5wcmlvcml0aWVzLCB0aGlzLnRvZG8ucHJpb3JpdHkpLmF0dHIoJ2lkJywgJ3NlbGVjdC1wcmlvcml0aWVzJyk7XHJcblxyXG4gICAgICAgIC8vIFN0YXR1cyByb3dcclxuICAgICAgICB0aGlzLnRhc2tSb3cgPSBuZXcgRE9NRWxlbWVudCgndHInLCB0aGlzLnRhYmxlKS5nZXQoKTtcclxuICAgICAgICBuZXcgRE9NRWxlbWVudCgndGgnLCB0aGlzLnRhc2tSb3cpLkhUTUwoJ1N0YXR1cycpO1xyXG4gICAgICAgIHRoaXMudGFza05lc3QgPSBuZXcgRE9NRWxlbWVudCgndGQnLCB0aGlzLnRhc2tSb3cpLmdldCgpO1xyXG4gICAgICAgIG5ldyBTZWxlY3QodGhpcy50YXNrTmVzdCwgJ3N0YXR1cycsIGFwaXMuc3RhdHVzZXMsIHRoaXMudG9kby5zdGF0dXMpLmF0dHIoJ2lkJywgJ3NlbGVjdC1zdGF0dXNlcycpO1xyXG5cclxuICAgICAgICAvL0Rlc2NyaXB0aW9uIHJvd1xyXG4gICAgICAgIHRoaXMudGFza1JvdyA9IG5ldyBET01FbGVtZW50KCd0cicsIHRoaXMudGFibGUpLmdldCgpO1xyXG4gICAgICAgIG5ldyBET01FbGVtZW50KCd0aCcsIHRoaXMudGFza1JvdykuSFRNTCgnRGVzY3JpcHRpb24nKTtcclxuICAgICAgICB0aGlzLnRhc2tOZXN0ID0gbmV3IERPTUVsZW1lbnQoJ3RkJywgdGhpcy50YXNrUm93KS5nZXQoKTtcclxuICAgICAgICBpZiAodGhpcy50b2RvLmRlc2NyaXB0aW9uID09PSAnTm8gZGVzY3JpcHRpb24nKSB7XHJcbiAgICAgICAgICAgIG5ldyBJbnB1dCh0aGlzLnRhc2tOZXN0LCAnZGVzY3JpcHRpb24nLCB0aGlzLnRvZG8uZGVzY3JpcHRpb24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ldyBJbnB1dCh0aGlzLnRhc2tOZXN0LCAnZGVzY3JpcHRpb24nLCAnVGFzayBkZXNjcmlwdGlvbicsIHRoaXMudG9kby5kZXNjcmlwdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1RpbWVzdGFtcCByb3dcclxuICAgICAgICB0aGlzLnRpbWVzdGFtcFJvdyA9IG5ldyBET01FbGVtZW50KCd0cicsIHRoaXMudGFibGUpLmdldCgpO1xyXG4gICAgICAgIG5ldyBET01FbGVtZW50KCd0aCcsIHRoaXMudGltZXN0YW1wUm93KS5IVE1MKCdBZGRlZCcpO1xyXG4gICAgICAgIHRoaXMudGltZXN0YW1wUm93ID0gbmV3IERPTUVsZW1lbnQoJ3RkJywgdGhpcy50aW1lc3RhbXBSb3cpLmdldCgpO1xyXG4gICAgICAgIG5ldyBJbnB1dCh0aGlzLnRpbWVzdGFtcFJvdywgJ3RpbWVzdGFtcCcsICcnLCB0aGlzLnRvZG8udGltZXN0YW1wKS5nZXQoKS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbn0iLCIndXNlIHN0cmljdCc7XHJcblxyXG5jbGFzcyBNb2RhbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihtb2RhbElkLCB0aXRsZSwgaGFuZGxlcnMpIHtcclxuICAgICAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbCcsICdmYWRlJyk7XHJcbiAgICAgICAgdGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgbW9kYWxJZCk7XHJcbiAgICAgICAgdGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XHJcbiAgICAgICAgdGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnZGlhbG9nJyk7XHJcbiAgICAgICAgdGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWxsZWRieScsIGAke21vZGFsSWR9TGFiZWxgKTtcclxuICAgICAgICB0aGlzLm1vZGFsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCB0cnVlKTtcclxuICAgICAgICB0aGlzLm1vZGFsLmRhdGFzZXQuYmFja2Ryb3AgPSAnc3RhdGljJztcclxuXHJcbiAgICAgICAgY29uc3QgbW9kYWxEaWFsb2cgPSBuZXcgRE9NRWxlbWVudCgnZGl2JywgdGhpcy5tb2RhbCk7XHJcbiAgICAgICAgbW9kYWxEaWFsb2cuYWRkQ2xhc3MoJ21vZGFsLWRpYWxvZycpO1xyXG4gICAgICAgIG1vZGFsRGlhbG9nLmF0dHIoJ3JvbGUnLCAnZG9jdW1lbnQnKTtcclxuXHJcbiAgICAgICAgY29uc3QgbW9kYWxDb250ZW50ID0gbmV3IERPTUVsZW1lbnQoJ2RpdicsIG1vZGFsRGlhbG9nLmdldCgpKTtcclxuICAgICAgICBtb2RhbENvbnRlbnQuYWRkQ2xhc3MoJ21vZGFsLWNvbnRlbnQnKTtcclxuXHJcbiAgICAgICAgY29uc3QgbW9kYWxIZWFkZXIgPSBuZXcgRE9NRWxlbWVudCgnZGl2JywgbW9kYWxDb250ZW50LmdldCgpKTtcclxuICAgICAgICBtb2RhbEhlYWRlci5hZGRDbGFzcygnbW9kYWwtaGVhZGVyJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGg1ID0gbmV3IERPTUVsZW1lbnQoJ2g1JywgbW9kYWxIZWFkZXIuZ2V0KCkpO1xyXG4gICAgICAgIGg1LmFkZENsYXNzKCdtb2RhbC10aXRsZScpO1xyXG4gICAgICAgIGg1LmF0dHIoJ2lkJywgYCR7bW9kYWxJZH1MYWJlbGApO1xyXG5cclxuICAgICAgICBjb25zdCBoZWFkZXJDbG9zZUJ1dHRvbiA9IG5ldyBET01FbGVtZW50KCdidXR0b24nLCBtb2RhbEhlYWRlci5nZXQoKSk7XHJcbiAgICAgICAgaGVhZGVyQ2xvc2VCdXR0b24uYWRkQ2xhc3MoJ2Nsb3NlJyk7XHJcbiAgICAgICAgaGVhZGVyQ2xvc2VCdXR0b24uYXR0cigndHlwZScsICdidXR0b24nKTtcclxuICAgICAgICBoZWFkZXJDbG9zZUJ1dHRvbi5hdHRyKCdhcmlhLWxhYmVsJywgJ0Nsb3NlJyk7XHJcbiAgICAgICAgaGVhZGVyQ2xvc2VCdXR0b24uYXR0cignZGF0YS1kaXNtaXNzJywgJ21vZGFsJyk7XHJcbiAgICAgICAgaGVhZGVyQ2xvc2VCdXR0b24uSFRNTChgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5gKTtcclxuICAgICAgICBoZWFkZXJDbG9zZUJ1dHRvbi5jbGljayhoYW5kbGVyc1swXSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1vZGFsQm9keSA9IG5ldyBET01FbGVtZW50KCdkaXYnLCBtb2RhbENvbnRlbnQuZ2V0KCkpO1xyXG4gICAgICAgIG1vZGFsQm9keS5hZGRDbGFzcygnbW9kYWwtYm9keScpO1xyXG4gICAgICAgIG1vZGFsQm9keS5hdHRyKCdpZCcsIGAke21vZGFsSWR9Q29udGVudGApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IG1vZGFsRm9vdGVyID0gbmV3IERPTUVsZW1lbnQoJ2RpdicsIG1vZGFsQ29udGVudC5nZXQoKSk7XHJcbiAgICAgICAgbW9kYWxGb290ZXIuYWRkQ2xhc3MoJ21vZGFsLWZvb3RlcicpO1xyXG5cclxuICAgICAgICBjb25zdCBjbG9zZSA9IG5ldyBET01FbGVtZW50KCdidXR0b24nLCBtb2RhbEZvb3Rlci5nZXQoKSk7XHJcbiAgICAgICAgY2xvc2UuYWRkQ2xhc3MoJ2J0bicsICdidG4tc2Vjb25kYXJ5Jyk7XHJcbiAgICAgICAgY2xvc2UuYXR0cigndHlwZScsICdidXR0b24nKTtcclxuICAgICAgICBjbG9zZS5hdHRyKCdkYXRhLWRpc21pc3MnLCAnbW9kYWwnKTtcclxuICAgICAgICBjbG9zZS5jbGljayhoYW5kbGVyc1swXSk7XHJcbiAgICAgICAgY29uc3QgYXBwbHkgPSBuZXcgRE9NRWxlbWVudCgnYnV0dG9uJywgbW9kYWxGb290ZXIuZ2V0KCkpO1xyXG4gICAgICAgIGFwcGx5LmFkZENsYXNzKCdidG4nLCAnYnRuLXByaW1hcnknKTtcclxuICAgICAgICBhcHBseS5hdHRyKCd0eXBlJywgJ2J1dHRvbicpO1xyXG4gICAgICAgIGFwcGx5LmNsaWNrKGhhbmRsZXJzWzFdKTtcclxuXHJcbiAgICAgICAgaDUuSFRNTCh0aXRsZSk7XHJcbiAgICAgICAgY2xvc2UuSFRNTCgnQ2xvc2UnKTtcclxuICAgICAgICBhcHBseS5IVE1MKCdBcHBseScpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tb2RhbDtcclxuICAgIH1cclxufSIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmNsYXNzIFNlbGVjdCBleHRlbmRzIERPTUVsZW1lbnQge1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50LCBuYW1lLCBjb2xsZWN0aW9uLCBjb3Zlck9wdGlvbikge1xyXG4gICAgICAgIHN1cGVyKCdzZWxlY3QnLCBwYXJlbnQpO1xyXG5cclxuICAgICAgICB0aGlzLmF0dHIoJ25hbWUnLCBuYW1lKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb3Zlck9wdGlvbiA9IG5ldyBET01FbGVtZW50KCdvcHRpb24nLCB0aGlzLmVsZW1lbnQpO1xyXG4gICAgICAgIGlmICghY292ZXJPcHRpb24gfHwgY292ZXJPcHRpb24gPT09ICdOb3QgZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdGhpcy5jb3Zlck9wdGlvbi5hdHRyKCd2YWx1ZScsICcwJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY292ZXJPcHRpb24uSFRNTCgnTm90IGRlZmluZWQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvdmVyT3B0aW9uLmF0dHIoJ3ZhbHVlJywgY292ZXJPcHRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLmNvdmVyT3B0aW9uLkhUTUwoY292ZXJPcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbGxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGNvdmVyT3B0aW9uID09PSBjb2xsZWN0aW9uW2ldLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBuZXcgRE9NRWxlbWVudCgnb3B0aW9uJywgdGhpcy5lbGVtZW50KTtcclxuICAgICAgICAgICAgb3B0aW9uLkhUTUwoY29sbGVjdGlvbltpXS52YWx1ZSk7XHJcbiAgICAgICAgICAgIG9wdGlvbi5hdHRyKCd2YWx1ZScsIGNvbGxlY3Rpb25baV0udmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmNsYXNzIFRvZG8ge1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHRhc2ssIHByaW9yaXR5LCBzdGF0dXMsIGRlc2NyaXB0aW9uLCB0aW1lc3RhbXApIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gICAgICAgIHRoaXMudGFzayA9IHRhc2s7XHJcbiAgICAgICAgaWYgKGRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gJ05vIGRlc2NyaXB0aW9uJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7XHJcblxyXG4gICAgICAgIHRoaXMucm9vdFxyXG4gICAgfVxyXG5cclxuICAgIGdldCgpIHtcclxuICAgICAgICB0aGlzLnJvb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICAgIHRoaXMucm9vdC5kYXRhc2V0LmlkID0gdGhpcy5pZDtcclxuICAgICAgICBuZXcgRE9NRWxlbWVudCgndGQnLCB0aGlzLnJvb3QpLkhUTUwodGhpcy50YXNrKTtcclxuICAgICAgICBuZXcgRE9NRWxlbWVudCgndGQnLCB0aGlzLnJvb3QpLkhUTUwodGhpcy5wcmlvcml0eSk7XHJcbiAgICAgICAgbmV3IERPTUVsZW1lbnQoJ3RkJywgdGhpcy5yb290KS5IVE1MKHRoaXMuc3RhdHVzKTtcclxuICAgICAgICBuZXcgRE9NRWxlbWVudCgndGQnLCB0aGlzLnJvb3QpLkhUTUwodGhpcy5kZXNjcmlwdGlvbik7XHJcbiAgICAgICAgbmV3IERPTUVsZW1lbnQoJ3RkJywgdGhpcy5yb290KS5IVE1MKHRoaXMudGltZXN0YW1wKTtcclxuICAgICAgICBjb25zdCBhY3Rpb25zTmVzdCA9IG5ldyBET01FbGVtZW50KCd0ZCcsIHRoaXMucm9vdCk7XHJcbiAgICAgICAgbmV3IEFjdGlvbkJhcihhY3Rpb25zTmVzdC5nZXQoKSwgdGhpcy5pZCwgWydFZGl0JywgJ0RlbGV0ZSddKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290O1xyXG4gICAgfVxyXG59IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxubGV0IGFwaXM7XHJcblxyXG5mdW5jdGlvbiBzZWVrKHNlbGVjdG9yKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgfHwgZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlc3Ryb3koc2VsZWN0b3IpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IHNlZWsoc2VsZWN0b3IpO1xyXG4gICAgaWYgKHRhcmdldCkge1xyXG4gICAgICAgIHRhcmdldC5yZW1vdmUoKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VW5pcXVlSWQoKSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAqIE1hdGgucmFuZG9tKCkpICUgMTAwMDAwKS50b1N0cmluZygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRJdGVtVG9Mb2NhbFN0b3JhZ2UobHNOYW1lLCBpdGVtKSB7XHJcbiAgICBsZXQgZGIgPSBnZXRMb2NhbFN0b3JhZ2UobHNOYW1lKTtcclxuICAgIGlmICghZGIpIHtcclxuICAgICAgICBkYiA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnB1c2goaXRlbSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsc05hbWUsIEpTT04uc3RyaW5naWZ5KGRiKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUl0ZW1JbkxvY2FsU3RvcmFnZShsc05hbWUsIGl0ZW0pIHtcclxuICAgIGNvbnN0IGRiID0gZ2V0TG9jYWxTdG9yYWdlKGxzTmFtZSk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRiLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGRiW2ldLmlkID09PSBpdGVtLmlkKSB7XHJcbiAgICAgICAgICAgIGRiW2ldID0gaXRlbTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obHNOYW1lLCBKU09OLnN0cmluZ2lmeShkYikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMb2NhbFN0b3JhZ2UobHNOYW1lKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShsc05hbWUpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0SXRlbUZyb21Mb2NhbFN0b3JhZ2UobHNOYW1lLCBpdGVtSWQpIHtcclxuICAgIGNvbnN0IGxzID0gZ2V0TG9jYWxTdG9yYWdlKGxzTmFtZSk7XHJcbiAgICBpZiAobHMpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChsc1tpXS5pZCA9PT0gaXRlbUlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbHNbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVJdGVtRnJvbUxvY2FsU3RvcmFnZShsc05hbWUsIGl0ZW1JZCkge1xyXG4gICAgY29uc3QgZGIgPSBnZXRMb2NhbFN0b3JhZ2UobHNOYW1lKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoZGJbaV0uaWQgPT09IGl0ZW1JZCkge1xyXG4gICAgICAgICAgICBkYi5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGxzTmFtZSwgSlNPTi5zdHJpbmdpZnkoZGIpKTtcclxufSIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmNsYXNzIFRvZG9MaXN0IGV4dGVuZHMgRE9NRWxlbWVudHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudCkge1xyXG4gICAgICAgIHN1cGVyKCd0YWJsZScsIHBhcmVudCk7XHJcbiAgICAgICAgdGhpcy50b2RvcyA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLmF0dHIoJ2lkJywgJ3RvZG9zTGlzdCcpO1xyXG5cclxuICAgICAgICB0aGlzLmhlYWRlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmNsaWNrKGFjdGlvbnNIYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRUb2RvKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9kb3MucHVzaChhcmd1bWVudHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRUb2Rvc0xpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9kb3Muc2xpY2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBoZWFkZXIoKSB7XHJcbiAgICAgICAgY29uc3QgdHIgPSBuZXcgRE9NRWxlbWVudCgndHInLCB0aGlzLmVsZW1lbnQpO1xyXG4gICAgICAgIG5ldyBET01FbGVtZW50KCd0aCcsIHRyLmdldCgpKS5IVE1MKCdUYXNrJyk7XHJcbiAgICAgICAgbmV3IERPTUVsZW1lbnQoJ3RoJywgdHIuZ2V0KCkpLkhUTUwoJ1ByaW9yaXR5Jyk7XHJcbiAgICAgICAgbmV3IERPTUVsZW1lbnQoJ3RoJywgdHIuZ2V0KCkpLkhUTUwoJ1N0YXR1cycpO1xyXG4gICAgICAgIG5ldyBET01FbGVtZW50KCd0aCcsIHRyLmdldCgpKS5IVE1MKCdEZXNjcmlwdGlvbicpO1xyXG4gICAgICAgIG5ldyBET01FbGVtZW50KCd0aCcsIHRyLmdldCgpKS5IVE1MKCdBZGRlZCcpO1xyXG4gICAgICAgIG5ldyBET01FbGVtZW50KCd0aCcsIHRyLmdldCgpKS5IVE1MKCdBY3Rpb25zJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsbExpc3QoKSB7XHJcbiAgICAgICAgdGhpcy5IVE1MKCcnKTtcclxuICAgICAgICB0aGlzLmhlYWRlcigpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50b2Rvcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy50b2Rvc1tpXS5nZXQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNvcnQoKSB7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn0iLCIndXNlIHN0cmljdCc7XHJcblxyXG5mdW5jdGlvbiBsb2FkVG9kb0xpc3QoKSB7XHJcbiAgICBkZXN0cm95KCcjdG9kb3NMaXN0Jyk7XHJcbiAgICBjb25zdCBsaXN0ID0gbmV3IFRvZG9MaXN0KHNlZWsoJyNhcHAnKSk7XHJcbiAgICBjb25zdCB0b2Rvc0xpc3QgPSBnZXRMb2NhbFN0b3JhZ2UoJ3RvZG9zJyk7XHJcbiAgICBpZiAoIXRvZG9zTGlzdCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9kb3NMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRvZG9zTGlzdFtpXSwgbmV3IFRvZG8pO1xyXG4gICAgICAgIGxpc3QuYWRkVG9kbyh0b2Rvc0xpc3RbaV0pO1xyXG4gICAgfVxyXG4gICAgbGlzdC5maWxsTGlzdCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0lucHV0Q29ycmVjdChmb3JtKSB7XHJcbiAgICBsZXQgZmxhZyA9IHRydWU7XHJcblxyXG4gICAgY29uc3QgdGFza3MgPSBzZWVrKCcjc2VsZWN0LXRhc2snKTtcclxuICAgIGNvbnN0IHByaW9yaXRpZXMgPSBzZWVrKCcjc2VsZWN0LXByaW9yaXRpZXMnKTtcclxuICAgIGNvbnN0IHN0YXR1c2VzID0gc2VlaygnI3NlbGVjdC1zdGF0dXNlcycpO1xyXG4gICAgbGV0IGVycm9yU2VsZWN0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Vycm9yLW1lc3NhZ2UnKTtcclxuXHJcbiAgICB0YXNrcy5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvci1ibG9jaycpO1xyXG4gICAgcHJpb3JpdGllcy5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvci1ibG9jaycpO1xyXG4gICAgc3RhdHVzZXMuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3ItYmxvY2snKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXJyb3JTZWxlY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZXJyb3JTZWxlY3RzW2ldLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChmb3JtLnRhc2sudmFsdWUgPT09ICcwJykge1xyXG4gICAgICAgIHRhc2tzLmNsYXNzTGlzdC5hZGQoJ2Vycm9yLWJsb2NrJyk7XHJcbiAgICAgICAgZmxhZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGZvcm0ucHJpb3JpdHkudmFsdWUgPT09ICcwJykge1xyXG4gICAgICAgIHByaW9yaXRpZXMuY2xhc3NMaXN0LmFkZCgnZXJyb3ItYmxvY2snKTtcclxuICAgICAgICBmbGFnID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoZm9ybS5zdGF0dXMudmFsdWUgPT09ICcwJykge1xyXG4gICAgICAgIHN0YXR1c2VzLmNsYXNzTGlzdC5hZGQoJ2Vycm9yLWJsb2NrJyk7XHJcbiAgICAgICAgZmxhZyA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGVycm9yU2VsZWN0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Vycm9yLWJsb2NrJyk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcnJvclNlbGVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gbmV3IERPTUVsZW1lbnQoJ3NwYW4nLCBlcnJvclNlbGVjdHNbaV0pO1xyXG4gICAgICAgIG1lc3NhZ2UuYWRkQ2xhc3MoJ2Vycm9yLW1lc3NhZ2UnKTtcclxuICAgICAgICBtZXNzYWdlLkhUTUwoJ0luY29ycmVjdCBpbnB1dCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmbGFnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRBcGlzKCkge1xyXG4gICAgZmV0Y2goJ2RhdGEuanNvbicpXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBhcGlzID0gcmVzO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjaGVja0FwaXMoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgbG9hZFRvZG9MaXN0KCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlamVjdGVkJywgZXJyKTtcclxuICAgICAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0FwaXMoKSB7XHJcbiAgICBjb25zdCBkYiA9IGdldExvY2FsU3RvcmFnZSgndG9kb3MnKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRiLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudCA9IGRiW2ldO1xyXG4gICAgICAgIGxldCBpc0N1cnJlbnRBcGlFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAvLyBjaGVjayBzdGF0dXNlc1xyXG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgYXBpcy5zdGF0dXNlcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudC5zdGF0dXMgPT09IGFwaXMuc3RhdHVzZXNba10udmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlzQ3VycmVudEFwaUV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzQ3VycmVudEFwaUV4aXN0cykge1xyXG4gICAgICAgICAgICBkYltpXS5zdGF0dXMgPSAnTm90IGRlZmluZWQnO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjaGVjayBwcmlvcml0aWVzXHJcbiAgICAgICAgaXNDdXJyZW50QXBpRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBhcGlzLnByaW9yaXRpZXMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQucHJpb3JpdHkgPT09IGFwaXMucHJpb3JpdGllc1trXS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaXNDdXJyZW50QXBpRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNDdXJyZW50QXBpRXhpc3RzKSB7XHJcbiAgICAgICAgICAgIGRiW2ldLnByaW9yaXR5ID0gJ05vdCBkZWZpbmVkJztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY2hlY2sgdGFza3NcclxuICAgICAgICBpc0N1cnJlbnRBcGlFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGFwaXMudGFza3MubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQudGFzayA9PT0gYXBpcy50YXNrc1trXS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaXNDdXJyZW50QXBpRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNDdXJyZW50QXBpRXhpc3RzKSB7XHJcbiAgICAgICAgICAgIGRiW2ldLnRhc2sgPSAnTm90IGRlZmluZWQnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kb3MnLCBKU09OLnN0cmluZ2lmeShkYikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRJdGVtVG9QYWdlQ29udGVudCh0b2RvT2JqKSB7XHJcbiAgICBzZWVrKCcjdG9kb3NMaXN0JykuYXBwZW5kQ2hpbGQodG9kb09iai5nZXQoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUl0ZW1JblBhZ2VDb250ZW50KHRvZG9PYmopIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0b2Rvc0xpc3QgPiBbZGF0YS1pZD1cIiR7dG9kb09iai5pZH1cIl1gKTtcclxuICAgIHNlZWsoJyN0b2Rvc0xpc3QnKS5yZXBsYWNlQ2hpbGQodG9kb09iai5nZXQoKSwgdGFyZ2V0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlSXRlbUZyb21QYWdlKGl0ZW1JZCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgdHJbZGF0YS1pZD1cIiR7aXRlbUlkfVwiXWApLnJlbW92ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVDb25maXJtYXRpb25DaGVjayhkZWxldGVCdXR0b24pIHtcclxuICAgIGRlbGV0ZUJ1dHRvbi5oaWRkZW4gPSB0cnVlO1xyXG4gICAgbmV3IEFjdGlvbkJhcihcclxuICAgICAgICBkZWxldGVCdXR0b24ucGFyZW50RWxlbWVudCwgXHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmRhdGFzZXQuaWQsIFxyXG4gICAgICAgIFsnQ29uZmlybScsICdDYW5jZWwnXVxyXG4gICAgKTtcclxufSIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmZ1bmN0aW9uIHdpbmRvd0hhbmRsZXIoKSB7XHJcbiAgICBnZXRBcGlzKCk7XHJcblxyXG4gICAgY29uc3QgYWRkQnV0dG9uID0gbmV3IEJ1dHRvbihzZWVrKCcjYXBwJyksICdBZGQgVE9ETycpO1xyXG4gICAgYWRkQnV0dG9uLmNsaWNrKGFkZFRvZG9IYW5kbGVyKTtcclxuXHJcbiAgICBsb2FkVG9kb0xpc3QoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVG9kb0hhbmRsZXIoKSB7XHJcbiAgICBzZWVrKCcjYXBwJykuYXBwZW5kQ2hpbGQoXHJcbiAgICAgICAgbmV3IE1vZGFsKFxyXG4gICAgICAgICAgICAnbW9kYWxXaW5kb3dBZGQnLCBcclxuICAgICAgICAgICAgJ0FkZCBuZXcgaXRlbScsIFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbkhhbmRsZXIsIFxyXG4gICAgICAgICAgICAgICAgYWRkQ29uZmlybWVkSGFuZGxlclxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgKS5nZXQoKSk7XHJcbiAgICBuZXcgQWRkRm9ybShzZWVrKCcjbW9kYWxXaW5kb3dBZGRDb250ZW50JykpO1xyXG4gICAgJCgnI21vZGFsV2luZG93QWRkJykubW9kYWwoJ3Nob3cnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQ29uZmlybWVkSGFuZGxlcigpIHtcclxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5mb3Jtcy5jcnVkRm9ybTtcclxuICAgIGNvbnN0IHRvZG8gPSBuZXcgVG9kbyhcclxuICAgICAgICBmb3JtLmlkLnZhbHVlLFxyXG4gICAgICAgIGZvcm0udGFzay52YWx1ZSxcclxuICAgICAgICBmb3JtLnByaW9yaXR5LnZhbHVlLFxyXG4gICAgICAgIGZvcm0uc3RhdHVzLnZhbHVlLFxyXG4gICAgICAgIGZvcm0uZGVzY3JpcHRpb24udmFsdWUsXHJcbiAgICAgICAgZm9ybS50aW1lc3RhbXAudmFsdWVcclxuICAgIClcclxuICAgIFxyXG4gICAgaWYgKGlzSW5wdXRDb3JyZWN0KGZvcm0pKSB7XHJcbiAgICAgICAgYWRkSXRlbVRvTG9jYWxTdG9yYWdlKCd0b2RvcycsIHRvZG8pO1xyXG4gICAgICAgIGFkZEl0ZW1Ub1BhZ2VDb250ZW50KHRvZG8pO1xyXG4gICAgICAgICQoJyNtb2RhbFdpbmRvd0FkZCcpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgZGVzdHJveSgnI21vZGFsV2luZG93QWRkJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlQnV0dG9uSGFuZGxlcigpIHtcclxuICAgIGRlc3Ryb3koJyNtb2RhbFdpbmRvd0VkaXQnKTtcclxuICAgIGRlc3Ryb3koJyNtb2RhbFdpbmRvd0FkZCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY3Rpb25zSGFuZGxlcihldmVudCkge1xyXG4gICAgY29uc3QgYWN0aW9uID0gZXZlbnQudGFyZ2V0LmRhdGFzZXQuYWN0aW9uO1xyXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQudGFyZ2V0LmRhdGFzZXQuaWQ7XHJcblxyXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcclxuICAgICAgICBjYXNlICdlZGl0JzpcclxuICAgICAgICAgICAgc2VlaygnI2FwcCcpLmFwcGVuZENoaWxkKFxyXG4gICAgICAgICAgICAgICAgbmV3IE1vZGFsKFxyXG4gICAgICAgICAgICAgICAgICAgICdtb2RhbFdpbmRvd0VkaXQnLCBcclxuICAgICAgICAgICAgICAgICAgICAnRWRpdCBpdGVtJywgXHJcbiAgICAgICAgICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbkhhbmRsZXIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBFZGl0Q29uZmlybWVkSGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICkuZ2V0KCkpO1xyXG4gICAgICAgICAgICBuZXcgRWRpdEZvcm0oc2VlaygnI21vZGFsV2luZG93RWRpdENvbnRlbnQnKSwgaXRlbUlkKTtcclxuICAgICAgICAgICAgJCgnI21vZGFsV2luZG93RWRpdCcpLm1vZGFsKCdzaG93Jyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2RlbGV0ZSc6XHJcbiAgICAgICAgICAgIGRlbGV0ZUNvbmZpcm1hdGlvbkNoZWNrKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2NhbmNlbCc6XHJcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBzZWVrKGBpbnB1dFtkYXRhLWFjdGlvbj1cImRlbGV0ZVwiXVtkYXRhLWlkPVwiJHtpdGVtSWR9XCJdYCkuaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2NvbmZpcm0nOlxyXG4gICAgICAgICAgICBkZWxldGVJdGVtRnJvbUxvY2FsU3RvcmFnZSgndG9kb3MnLCBpdGVtSWQpO1xyXG4gICAgICAgICAgICBkZWxldGVJdGVtRnJvbVBhZ2UoaXRlbUlkKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEVkaXRDb25maXJtZWRIYW5kbGVyKCkge1xyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmZvcm1zLmNydWRGb3JtO1xyXG4gICAgY29uc3QgdG9kbyA9IG5ldyBUb2RvKFxyXG4gICAgICAgIGZvcm0uaWQudmFsdWUsXHJcbiAgICAgICAgZm9ybS50YXNrLnZhbHVlLFxyXG4gICAgICAgIGZvcm0ucHJpb3JpdHkudmFsdWUsXHJcbiAgICAgICAgZm9ybS5zdGF0dXMudmFsdWUsXHJcbiAgICAgICAgZm9ybS5kZXNjcmlwdGlvbi52YWx1ZSxcclxuICAgICAgICBmb3JtLnRpbWVzdGFtcC52YWx1ZVxyXG4gICAgKVxyXG4gICAgXHJcbiAgICBpZiAoaXNJbnB1dENvcnJlY3QoZm9ybSkpIHtcclxuICAgICAgICB1cGRhdGVJdGVtSW5Mb2NhbFN0b3JhZ2UoJ3RvZG9zJywgdG9kbyk7XHJcbiAgICAgICAgdXBkYXRlSXRlbUluUGFnZUNvbnRlbnQodG9kbyk7XHJcbiAgICAgICAgJCgnI21vZGFsV2luZG93RWRpdCcpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgZGVzdHJveSgnI21vZGFsV2luZG93RWRpdCcpO1xyXG4gICAgfVxyXG59IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB3aW5kb3dIYW5kbGVyKTsiXX0=
